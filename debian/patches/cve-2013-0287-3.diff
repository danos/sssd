commit 26590d31f492dbbd36be6d0bde46a4bd3b221edb
Author: Jakub Hrozek <jhrozek@redhat.com>
Date:   Mon Mar 4 16:37:04 2013 +0100

    Do not compile main() in DP if UNIT_TESTING is defined
    
    The simple access provider unit tests now need to link against the Data
    Provider when they start using the be_file_account_request() function.
    But then we would start having conflicts as at least the main()
    functions would clash.
    
    If UNIT_TESTING is defined, then the data_provider_be.c module does not
    contain the main() function and can be linked against directly from
    another module that contains its own main() function

diff --git a/src/providers/data_provider_be.c b/src/providers/data_provider_be.c
index f85a04d..33590ae 100644
--- a/src/providers/data_provider_be.c
+++ b/src/providers/data_provider_be.c
@@ -2651,6 +2651,7 @@ fail:
     return ret;
 }
 
+#ifndef UNIT_TESTING
 int main(int argc, const char *argv[])
 {
     int opt;
@@ -2732,6 +2733,7 @@ int main(int argc, const char *argv[])
 
     return 0;
 }
+#endif
 
 static int data_provider_res_init(DBusMessage *message,
                                   struct sbus_connection *conn)
